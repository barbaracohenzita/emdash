@import 'vars'
@import '404'
@import 'nav'
@import 'search'
@import 'tags'
@import 'books'
@import 'book-info'
@import 'excerpts'
@import 'tabs'
@import 'settings'
@import 'import'
@import 'create'

*
  box-sizing: border-box
  margin: 0
  padding: 0
  user-select: none

::selection
  background: $fg
  color: $bg
  text-shadow: none

html
  font-size: 10px

body
  color: $fg
  background: $bg
  font-family: $font
  font-size: $baseFontSize

#root
  width: 100vw
  min-height: 100vh
  display: flex
  flex-direction: column
  overflow: hidden

main
  display: flex
  flex-direction: column
  flex: 1
  padding: 0 6rem

  @include mobile
    padding: 0 3rem

  > div
    margin: 0 auto
    margin-top: 8rem
    width: 100%
    max-width: $maxWidth

    &.fullWidth
      max-width: 100%
      margin-top: 0

    &.searchPage
      margin-top: 0

h1, h2, h3, h4, h5, h6
  font-weight: normal

h1
  font-size: 5rem
  line-height: 1.2
  margin-bottom: 1rem

  @include mobile
    font-size: 4rem

h5
  font-size: 2rem

aside
  font-style: italic

button
  font-family: $font
  appearance: none
  background: none
  outline: none
  border: none
  cursor: pointer
  font-size: $baseFontSize

.button
  font-family: $font
  padding: 0.5rem 1rem
  border: 1px solid $fg
  background: $bg
  box-shadow: 2px 2px 0 0 $fg
  position: relative
  top: 0
  left: 0
  transition: all .15s
  color: $fg

  &:hover
    top: -1px
    left: -1px
    box-shadow: 3px 3px 0 0 $fg

  &:active
    box-shadow: 0 0 0 0 $fg
    top: 2px
    left: 2px

  &:disabled
    border-color: $mid3
    box-shadow: 2px 2px 0 0 $mid3
    color: $mid3
    pointer-events: none

ul
  list-style: none

a
  cursor: pointer
  color: $fg
  text-decoration: underline
  text-decoration-color: $mid1
  text-decoration-thickness: 3px
  transition: text-decoration-color .3s

  &:hover
    text-decoration-color: $accent

hr
  border: none
  border-bottom: 1px solid $mid3

input, textarea
  background: none
  font-family: $font
  outline: none
  border: 1px solid $mid2
  color: $fg

  &::placeholder
    color: $mid3

  &:focus
    border-color: $fg

input
  border: none
  border-bottom: 1px solid $mid2
  padding: 0
  padding-top: 0.2rem
  padding-bottom: 0.4rem
  font-size: $baseFontSize

textarea
  border-color: $mid2
  padding: 1rem
  font-family: $monoFont
  font-size: 1.4rem
  resize: none
  display: block
  width: 100%
  height: 12rem

input[type='range']
  accent-color: $fg
  appearance: none
  border: none
  margin-right: 1rem

  &:focus
    outline: none
    border: 0

  &::-webkit-slider-thumb
    appearance: none
    width: 1.4rem
    aspect-ratio: 1
    border-radius: 100%
    background: $fg
    border: 1px solid $bg
    transform: translateY(-50%)
    cursor: ew-resize

  &::-webkit-slider-runnable-track
    width: 100%
    height: 1px
    background: $mid2

summary
  cursor: pointer
  text-decoration: underline 3px transparent

  &:hover
    text-decoration-color: $mid1

details[open]
  summary
    text-decoration-color: $mid1

progress
  accent-color: $fg
  appearance: none
  height: 0.4rem

  &::-webkit-progress-bar
    background: $mid2
    border-radius: 50px

  &::-webkit-progress-value
    background: $fg
    border-radius: 50px

.title
  font-style: italic

.hidden
  visibility: hidden

.icon
  width: 28px

.hint
  @include fade
  position: absolute
  display: flex
  font-weight: normal
  align-items: center
  pointer-events: none
  width: max-content
  font-style: italic
  background: $fg
  color: $bg
  font-size: 1.5rem
  right: -2rem
  transform: translateX(100%)
  padding: 0.2rem 0.6rem
  opacity: 0
  line-height: 1.4
  padding-left: 0

  @include mobile
    display: none

  &:before
    content: ''
    position: absolute
    top: 0
    left: 0
    z-index: -1
    transform-origin: 0 0
    height: 70.71067812%
    aspect-ratio: 1
    transform: rotate(45deg)
    background: inherit

  &.left
    right: unset
    padding-left: 0.6rem
    padding-right: 0
    left: -2rem
    transform: translateX(-100%)

    &:before
      left: unset
      right: 0
      transform: translateX(100%) rotate(45deg)

    &.swapRight
      @include midWidth
        transform: translateX(100%)
        left: unset
        right: -2rem
        padding: 0.2rem 0.6rem
        padding-left: 0

        &:before
          left: 0
          right: unset
          transform: rotate(45deg)

*:has(> .hint)
  display: flex
  align-items: center

  &:hover .hint
    opacity: 1

.smallCaps
  font-variant: small-caps
  font-weight: 500

.modeHeading
  margin: 0 auto
  margin-bottom: 1rem
  color: $mid4
  display: flex
  justify-content: center
  position: relative
  width: fit-content

  &.center
    margin-bottom: 4rem

    @include mobile
      margin-bottom: 6rem

  ul
    display: flex
    margin-bottom: 0.6rem

  li
    border-left: 1px solid $mid2
    text-align: center
    display: flex
    align-items: center
    justify-content: center
    position: relative

    &:last-child
      border-right: 1px solid $mid2

    &.active
      button
        color: $fg

        span
          border-color: $fg

  button
    width: 11.88rem
    color: $mid4
    font-size: 1.6rem
    display: flex
    justify-content: center

    span
      padding: 0.6rem 0
      font-size: inherit
      border-bottom: 1px solid transparent

    &:hover
      color: $fg

      span
        border-color: $mid2

  .sorter
    position: absolute
    bottom: -3.4rem
    font-size: 1.4rem
    white-space: nowrap

    span
      position: relative
      border-bottom: none !important

    .arrow
      font-size: 1rem
      padding: 0
      line-height: 2.1
      transform: translateX(-150%)
      position: absolute
      left: 0

      &.reverse
        transform: translateX(-150%) rotate(180deg)

  @include mobile
    width: 100%

    ul
      width: 100%

    li
      flex: 1

    button
      font-size: 1.3rem
      width: 100%
      padding: 0 0.6rem

footer
  display: flex
  flex-direction: column
  padding: 4rem 0
  margin-bottom: 4rem
  margin-top: auto
  align-items: center
  justify-content: center

  @include mobile
    padding: 4rem

  .links
    margin: 4rem 0
    text-align: center

    a
      margin: 0 1rem
      display: inline-block
      margin-bottom: 1rem

  .fleuron
    font-size: 4rem

.dragNotice
  position: fixed
  inset: 0
  background-color: rgba(255, 255, 255, 0.85)
  display: flex
  align-items: center
  justify-content: center
  z-index: 9999
  font-size: 2rem

.embeddingProgress
  flex: 1
  justify-content: center
  display: flex
  flex-direction: column

  p
    font-style: italic

  progress
    margin: 0.8rem 0

  div
    display: flex
    align-items: center

    p
      margin-left: 1rem

.demoNotice
  position: fixed
  bottom: 0
  width: 100vw
  background: $bg
  padding: 1.6rem
  z-index: 99
  display: flex
  justify-content: center
  align-items: center
  border-top: 1px solid $mid1

  span
    margin-right: 0.7rem
    font-size: 2rem

.buttonStack
  button
    margin-bottom: 1.5rem

  p
    margin-bottom: 4rem

.modal
  position: fixed
  display: flex
  justify-content: center
  align-items: center
  background: rgba(255, 255, 255, 0.9)
  inset: 0
  z-index: 9999

  .errorBox
    font-size: 1.8rem
    max-width: 60rem
    border: 4px double $mid2
    padding: 4rem
    background: $bg
    max-height: 80vh
    display: flex
    flex-direction: column

    div
      margin: 3rem 0
      font-size: 1.4rem
      overflow: auto

      code
        user-select: text

    button
      align-self: center
